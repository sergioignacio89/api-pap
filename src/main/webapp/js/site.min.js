function ValidateSize(e){e.files[0].size/1024/1024>2.5&&($("#modalStyle").removeClass("modal-notify modal-danger"),$("#modalStyle").addClass("modal-notify modal-warning"),$("#titleModal").html("Atención"),$("#bodyModal").html("El tamaño del archivo es demasiado grande, máximo tamaño posible: 2.5 MB"),$("#alertModal").modal())}function FileValidation(){var e=$("#inputGroupFile01"),a=e[0].value;if(!/(\.xls|\.xlsx)$/i.exec(a))return $("#modalStyle").removeClass("modal-notify modal-danger"),$("#modalStyle").addClass("modal-notify modal-warning"),$("#titleModal").html("Atención"),$("#bodyModal").html("Solo se permiten archivos con la siguiente extension: .xls/.xlsx"),$("#alertModal").modal(),e.value="",!1;Predict()}function Predict(){document.getElementById("loader").style.display="block";var e=new FormData;jQuery.each(jQuery("#inputGroupFile01")[0].files,function(a,t){e.append("file",t)}),jQuery.ajax({url:"rest/accidents/predict/",data:e,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(e){var a=TransformarJSON(e);$("#rowGrid").css("visibility","visible"),document.getElementById("loader").style.display="none",ArmarTable(a),ArmarPieChart(a),$('[data-toggle="tooltip"]').tooltip()},error:function(e){document.getElementById("loader").style.display="none",$("#modalStyle").removeClass("modal-notify modal-warning"),$("#modalStyle").addClass("modal-notify modal-danger"),$("#titleModal").html("Error"),$("#bodyModal").html("Ocurrió un error en la comunicacion con el servicio, intente mas tarde"),$("#alertModal").modal()}})}function ArmarTable(e){$("#dtBasic").DataTable({data:e,destroy:!0,columns:[{data:"id"},{data:"siniestroSeveridad"},{data:"siniestroCausa"},{data:"siniestroParteCuerpo"},{data:"siniestroPrestador"},{data:"siniestroTipoPoliza"},{data:"siniestroPorcentajeJuicio"},{data:"siniestroTieneJuicio"}],columnDefs:[{targets:2,render:function(e,a,t){return"display"===a&&null!=e&&(e=e.replace(/<(?:.|\\n)*?>/gm,"")).length>80?'<span class="show-ellipsis" data-toggle="tooltip" data-placement="bottom" title="'+e+'">'+e.substr(0,80)+'</span><span class="no-show">'+e.substr(80)+"</span>":e}},{targets:[6],render:$.fn.dataTable.render.number(",",".",2)}],dom:"<'row buttonrows'<'col-sm-3'l><'col-sm-6 text-center'B><'col-sm-3'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",buttons:[{extend:"excel",text:'<span data-toggle="tooltip" data-placement="bottom" title="EXPORTAR RESULTADOS">EXPORTAR RESULTADOS </span><span class="fa fa-download"></span>'}],language:{info:"Mostrando _START_ a _END_ de _TOTAL_ Registros",search:"Buscar",lengthMenu:"Mostrar _MENU_ registros",infoEmpty:"Mostrando 0 a 0 de 0 registros",emptyTable:"No hay registros en la tabla",zeroRecords:"No se encontraron los registros buscados",paginate:{first:"«",previous:"‹",next:"›",last:"»"},aria:{paginate:{first:"Primero",previous:"Anterior",next:"Siguiente",last:"Último"}}},order:[6,"desc"],createdRow:function(e,a,t){parseFloat(a.siniestroPorcentajeJuicio)<=30?$(e).addClass("rowGood"):parseFloat(a.siniestroPorcentajeJuicio)>30&&parseFloat(a.siniestroPorcentajeJuicio)<55?$(e).addClass("rowWarning"):$(e).addClass("rowDanger")}}),$(".dataTables_length").addClass("bs-select")}function ArmarPieChart(e){for(var a=[0,0,0],t=0;t<e.length;t++)parseFloat(e[t].siniestroPorcentajeJuicio)<=30?a[2]++:parseFloat(e[t].siniestroPorcentajeJuicio)>30&&parseFloat(e[t].siniestroPorcentajeJuicio)<55?a[1]++:a[0]++;var o=document.getElementById("myChart");new Chart(o,{type:"pie",data:{labels:["Rojo","Naranja","Verde"],datasets:[{data:a,backgroundColor:["#b71c1c","#ff8f00","#1b5e20"]}]}})}function TransformarJSON(e){for(var a=[],t=0;t<e._accidents.length;t++){var o={id:"",siniestroSeveridad:"",siniestroCausa:"",siniestroParteCuerpo:"",siniestroPorcentajeJuicio:"",siniestroTieneJuicio:"",siniestroPrestador:"",siniestroTipoPoliza:""};o.id=e._accidents[t].accident.id,o.siniestroCausa=e._accidents[t].accident.siniestroCausa,o.siniestroParteCuerpo=e._accidents[t].accident.siniestroParteCuerpo,o.siniestroSeveridad=e._accidents[t].accident.siniestroSeveridad,o.siniestroPorcentajeJuicio=e._accidents[t].inferredValue,o.siniestroTieneJuicio=e._accidents[t].accident.juicioTiene,o.siniestroPrestador=e._accidents[t].accident.siniestroPrestador,o.siniestroTipoPoliza=e._accidents[t].accident.tipoPoliza,a.push(o)}return a}$(document).ready(function(){$("#rowGrid").css("visibility","hidden"),document.getElementById("loader").style.display="none",$('[data-toggle="tooltip"]').tooltip()});