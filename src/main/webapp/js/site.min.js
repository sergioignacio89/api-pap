function fileValidation(){var e=$("#inputGroupFile01"),a=e[0].value;if(!/(\.xls|\.xlsx)$/i.exec(a))return $("#modalStyle").removeClass("modal-notify modal-danger"),$("#modalStyle").addClass("modal-notify modal-warning"),$("#titleModal").html("Atención"),$("#bodyModal").html("Solo se permiten archivos con la siguiente extension: .xls/.xlsx"),$("#alertModal").modal(),e.value="",!1;document.getElementById("loader").style.display="block";var o=new FormData;jQuery.each(jQuery("#inputGroupFile01")[0].files,function(e,a){o.append("file",a)}),jQuery.ajax({url:"rest/accidents/predict/",data:o,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(e){var a=transformarJSON(e);$("#rowGrid").css("visibility","visible"),document.getElementById("loader").style.display="none",$("#dtBasic").DataTable({data:a,destroy:!0,columns:[{data:"siniestroSeveridad"},{data:"siniestroCausa"},{data:"siniestroParteCuerpo"},{data:"siniestroPorcentajeJuicio"}],dom:"<'row buttonrows'<'col-sm-3'l><'col-sm-6 text-center'B><'col-sm-3'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",buttons:["excel"],language:{info:"Mostrando _START_ a _END_ de _TOTAL_ Registros",search:"Buscar",lengthMenu:"Mostrar _MENU_ registros",infoEmpty:"Mostrando 0 a 0 de 0 registros",emptyTable:"No hay registros en la tabla",zeroRecords:"No se encontraron los registros buscados",paginate:{first:"«",previous:"‹",next:"›",last:"»"},aria:{paginate:{first:"Primero",previous:"Anterior",next:"Siguiente",last:"Último"}}},ordering:!1,createdRow:function(e,a,o){parseFloat(a.siniestroPorcentajeJuicio)<=45?$(e).addClass("rowGood"):parseFloat(a.siniestroPorcentajeJuicio)>45&&parseFloat(a.siniestroPorcentajeJuicio)<60?$(e).addClass("rowWarning"):$(e).addClass("rowDanger")}}),$(".dataTables_length").addClass("bs-select")},error:function(e){console.log("error ",e),document.getElementById("loader").style.display="none",$("#modalStyle").removeClass("modal-notify modal-warning"),$("#modalStyle").addClass("modal-notify modal-danger"),$("#titleModal").html("Error"),$("#bodyModal").html("Ocurrió un error en la comunicacion con el servicio, intente mas tarde"),$("#alertModal").modal()}})}function transformarJSON(e){for(var a=[],o=0;o<e._accidents.length;o++){var t={siniestroSeveridad:"",siniestroCausa:"",siniestroParteCuerpo:"",siniestroPorcentajeJuicio:""};t.siniestroCausa=e._accidents[o].accident.siniestroCausa,t.siniestroParteCuerpo=e._accidents[o].accident.siniestroParteCuerpo,t.siniestroSeveridad=e._accidents[o].accident.siniestroSeveridad,t.siniestroPorcentajeJuicio=e._accidents[o].inferredValue,a.push(t)}return a}$(document).ready(function(){$("#rowGrid").css("visibility","hidden"),document.getElementById("loader").style.display="none"});